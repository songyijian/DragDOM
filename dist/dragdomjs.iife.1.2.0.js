var DragDOM=function(){"use strict";function E(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle(t,!1)[e]}return function(){function t(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};1===t.nodeType?(this.elPosition=E(t,"position"),"absolute"===this.elPosition||"fixed"===this.elPosition?(this.el=t,this.parentData=null,this.elData=null,this.moveData=null,this.config={overflow:e.overflow||!1,pUnit:e.pUnit||"px",start:e.start||function(){},drag:e.drag||function(){},end:e.end||function(){}},this.init(this.el)):console.warn("[DragDOM el] position on  absolute | fixed！")):console.warn("[DragDOM el] Is not a valid node ！")}var e=t.prototype;return e.init=function(u){var t,e,n,f=this,c=!1,o=void 0!==u.ontouchstart?"touch":"mouse";function d(t){var e=t||window.event;return"touch"===o?e.touches[0]:e}n="touch"===o?(t="touchstart",e="touchmove","touchend"):(t="mousedown",e="mousemove","mouseup");var h,p,g,v,m,D,y,w,x,P,L,T,b=null;u.addEventListener(t,function(t){if(t.preventDefault(),this.elPosition=E(u,"position"),"absolute"!==this.elPosition&&"fixed"!==this.elPosition)return console.error("[Drag el] position on  absolute | fixed！");var e,n,o,i,a=d(t);x=a.pageX,P=a.pageY,D="absolute"===f.elPosition?(e=function(t){for(var e=t.offsetLeft,n=t.offsetTop,o=t.offsetParent;null!=o;)e+=o.offsetLeft+o.clientLeft,n+=o.offsetTop+o.clientTop,o=o.offsetParent;return{x:e,y:n}}(b=u.offsetParent),o=(n=b.getBoundingClientRect()).height,i=n.width,y=e.y,w=e.x,m=i,o):(L=document.documentElement.clientWidth,T=document.documentElement.clientHeight,b=document.documentElement,w=y=0,m=L,T),f.parentData={parent:b,parentWidth:m,parentHeight:D,parentTop:y,parentLeft:w};var r=u.getBoundingClientRect(),s=r.height,l=r.width;g=l,v=s,h=u.offsetTop,p=u.offsetLeft,f.elData={elWidth:g,elHeight:v,elTop:h,elLeft:p},f.moveData=null,c=!0,f.config.start.call(f,t)},!1),document.addEventListener(e,function(t){var e,n,o,i,a;c&&(t.preventDefault(),n=(e=d(t)).pageX-x,o=e.pageY-P,i=h+o,a=p+n,f.config.overflow||(D-v<i&&(i=D-v),m-g<a&&(a=m-g),i<0&&(i=0),a<0&&(a=0)),!(f.moveData={mx:n,my:o,ely:i,elx:a})!==f.config.drag.call(f,t,f.moveData)&&(u.style.bottom="auto",u.style.right="auto","%"===f.config.pUnit?(u.style.top=i/D*100+"%",u.style.left=a/m*100+"%"):(u.style.top=i+"px",u.style.left=a+"px")))},{passive:!1}),document.addEventListener(n,function(t){c&&(c=!1,f.config.end.call(f,t))},!1)},e.start=function(t){return this.config.start=t,this},e.drag=function(t){return this.config.drag=t,this},e.end=function(t){return this.config.end=t,this},t}()}();
