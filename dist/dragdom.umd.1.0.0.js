!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";function E(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle(t,!1)[e]}var t=function(){function t(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};1===t.nodeType?(this.elPosition=E(t,"position"),"absolute"===this.elPosition||"fixed"===this.elPosition?(this.el=t,this._dragStart=function(){},this._drag=function(){},this._dragEnd=function(){},this.parentData=null,this.elData=null,this.moveData=null,this.config={overflow:e.overflow||!1},this.init(this.el)):console.warn("[Drag el] position on  absolute | fixed！")):console.warn("[Drag el] Is not a valid node ！")}var e=t.prototype;return e.init=function(l){var t,e,n,f=this,d=!1,o=void 0!==l.ontouchstart?"touch":"mouse";function c(t){var e=t||window.event;return"touch"===o?e.touches[0]:e}n="touch"===o?(t="touchstart",e="touchmove","touchend"):(t="mousedown",e="mousemove","mouseup");var h,p,g,v,m,w,D,y,P,x,b=null;l.addEventListener(t,function(t){var e,n,o,i,a,s,r,u;this.elPosition=E(l,"position"),"absolute"===this.elPosition||"fixed"===this.elPosition?(e=c(t),w="absolute"===f.elPosition?(n=function(t){for(var e=t.offsetLeft,n=t.offsetTop,o=t.offsetParent;null!=o;)e+=o.offsetLeft+o.clientLeft,n+=o.offsetTop+o.clientTop,o=o.offsetParent;return{x:e,y:n}}(b=l.offsetParent),i=(o=b.getBoundingClientRect()).height,a=o.width,D=n.y,y=n.x,m=a,i):(b=document.documentElement,y=D=0,m=document.documentElement.clientWidth,document.documentElement.clientHeight),r=(s=l.getBoundingClientRect()).height,u=s.width,g=u,v=r,h=l.offsetTop,p=l.offsetLeft,P=e.pageX,x=e.pageY,f.parentData={parent:b,parentWidth:m,parentHeight:w,parentTop:D,parentLeft:y},f.elData={elWidth:g,elHeight:v,elTop:h,elLeft:p},f.moveData=null,d=!0,f._dragStart(t)):console.error("[Drag el] position on  absolute | fixed！")},!1),document.addEventListener(e,function(t){var e,n,o,i,a;d&&(t.preventDefault(),n=(e=c(t)).pageX-P,o=e.pageY-x,i=h+o,a=p+n,"absolute"!==f.elPosition&&"fixed"!==f.elPosition||f.config.overflow||(i<0&&(i=0),a<0&&(a=0),w-v<i&&(i=w-v),m-g<a&&(a=m-g)),!(f.moveData={mx:n,my:o,ely:i,elx:a})!==f._drag(t,f.moveData)&&(l.style.top=i+"px",l.style.left=a+"px"))},{passive:!1}),document.addEventListener(n,function(t){d&&(d=!1,f._dragEnd(t))},!1)},e.start=function(t){return this._dragStart=t.bind(this),this},e.drag=function(t){return this._drag=t.bind(this),this},e.end=function(t){return this._dragEnd=t.bind(this),this},t}();window.DragDOM=t});
